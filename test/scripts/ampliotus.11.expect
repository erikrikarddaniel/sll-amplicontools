-- File generated by ampliotus, call:
--   ampliotus  --dbids=0,0,0,0 --delimiter="\t" --difference=0.03 --fields= --format=amplisql --listfile=ampliotus.11.list --method_name=FCluster --stripsuffixes=(?-mix:.fasta) ampliotus.11.1.fasta ampliotus.11.2.fasta ampliotus.11.3.fasta
--
INSERT INTO otu_methods(id, otu_method_name, level, created_at, updated_at)
  VALUES(1, 'FCluster97', '97 %', now(), now())
;
INSERT INTO samples(id, sample_name, created_at, updated_at)
  VALUES(1, 'ampliotus.11.1', now(), now())
;
INSERT INTO samples(id, sample_name, created_at, updated_at)
  VALUES(2, 'ampliotus.11.2', now(), now())
;
INSERT INTO samples(id, sample_name, created_at, updated_at)
  VALUES(3, 'ampliotus.11.3', now(), now())
;
INSERT INTO otus(id, otu_method_id, otu_name, type_sequence, created_at, updated_at)
  VALUES(1, 1, 'OTU97_000000', 'CTAATCCTGTTCGCTCCCCGCGCTTTCGCTCCTCAGTGTCAGTATTGGCCCAGAGACCTGCCTTCGCCATTGGTGTTCCTCCTGATATCTGCGCATTCCACCGCTACACCAGGAATTCCAGTCTCCCCTACCAAACTCTAGCTTGCCCGTATCGAGTGCAGGTCAGGGGTTGAGCCCCTGAATTTCACACCCGACGCAACAAACCACCTACGAGCTCTTTACGCCCAATAATTCCGGACAACGCTTGCACCCTATGTATTACCGCGGCTGCTGGCACATAGTTAGCCGGTGCTTCTTCTTTAGGTACCGTCACTTTCGCTTCTTCCCTACTGAAAG', now(), now())
;
COPY sample_counts(id, otu_id, sample_id, count, created_at, updated_at) FROM stdin;
1	1	1	1	now()	now()
2	1	2	2	now()	now()
3	1	3	0	now()	now()
\.
INSERT INTO otus(id, otu_method_id, otu_name, type_sequence, created_at, updated_at)
  VALUES(2, 1, 'OTU97_000001', 'CTAATCCTGTTCGCTCCCCACGCTTTCGCTCCTCAGTGTCAGTATTGGCCCAGAGACCTGCCTTCGCCATCGGTGTTCCTCCTGATATCTGCGCATTCCACCGCTACACCAGGAATTCCAGTCTCCCCTACCAAACTCTAGCTCGACCGTATCGGATGCAGGTCAGGGGTTGAGCCCCTGATTTTCACATCCGACGTATCGAACCACCTACGAGCTCTTTACGCCCAATAATTCCGGACAACGCTTGCACCCTATGTATTACCGCGGCTGCTGGCACATAGTTAGCCGGTGCTTCTTCTGTAGGTACCGTCACTTTCGCTTCTTCCCTACTGAAAGAGGTTTACAACCCGAAGGCCTTCATCCCTCACGCGGCGTCGCT', now(), now())
;
COPY sample_counts(id, otu_id, sample_id, count, created_at, updated_at) FROM stdin;
4	2	1	28	now()	now()
5	2	2	20	now()	now()
6	2	3	28	now()	now()
\.
INSERT INTO otus(id, otu_method_id, otu_name, type_sequence, created_at, updated_at)
  VALUES(3, 1, 'OTU97_000002', 'CTAATCCTGTTTGCTCCCCACGCTTTCGTGCATGAGCGTCAGTGTTATCCCAGGGGGCTGCCTTCGCCATTGGTATTCCTCCACATATCTACGCATTTCACTGCTACACGTGGAATTCTACCCCCCTCTGACACACTCTAGCTATACAGTCACAGGCGCCATTCCCAGGTTAAGCCCGGGGATTTCACGCCTGTCTTGTATAACCGCCTGCGCACGCTTTACGCCCAGTAATTCCGATTAACGCTCGCACCCTACGTATTACCGCGGCTGCTGGCACGTAGTTAGCCGGTGCTTATTCTTCAGGTACCGTCATTCCCGGACTGTGTTAGAGCCGGTGTTTCTTCCCTGACAAAAGAGCTTTACAACCCGAAGGCCTTCT', now(), now())
;
COPY sample_counts(id, otu_id, sample_id, count, created_at, updated_at) FROM stdin;
7	3	1	9	now()	now()
8	3	2	10	now()	now()
9	3	3	13	now()	now()
\.
CREATE OR REPLACE VIEW fcluster97_sample_count_matrix AS
  SELECT om.otu_method_name, om.level, o.id AS otu_id, o.otu_name, o.type_sequence AS otu_type_sequence, sc0.count AS ampliotus_11_1_count, sc1.count AS ampliotus_11_2_count, sc2.count AS ampliotus_11_3_count
  FROM otu_methods om JOIN otus o ON om.id = o.otu_method_id JOIN sample_counts sc0 ON o.id = sc0.otu_id JOIN samples s0 ON s0.id = sc0.sample_id JOIN sample_counts sc1 ON o.id = sc1.otu_id JOIN samples s1 ON s1.id = sc1.sample_id JOIN sample_counts sc2 ON o.id = sc2.otu_id JOIN samples s2 ON s2.id = sc2.sample_id
  WHERE om.otu_method_name = 'FCluster97' AND s0.sample_name = 'ampliotus.11.1' AND s1.sample_name = 'ampliotus.11.2' AND s2.sample_name = 'ampliotus.11.3'
;
